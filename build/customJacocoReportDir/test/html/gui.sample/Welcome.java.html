<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Welcome.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">template</a> &gt; <a href="index.source.html" class="el_package">gui.sample</a> &gt; <span class="el_source">Welcome.java</span></div><h1>Welcome.java</h1><pre class="source lang-java linenums">package gui.sample;

import static javafx.scene.paint.Color.WHITE;

import java.io.File;
import java.io.IOException;
import java.net.URL;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.ResourceBundle;
import javafx.animation.KeyFrame;
import javafx.animation.KeyValue;
import javafx.animation.Timeline;
import javafx.fxml.FXML;
import javafx.fxml.FXMLLoader;
import javafx.fxml.Initializable;
import javafx.scene.Node;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.PasswordField;
import javafx.scene.control.TextField;
import javafx.scene.effect.GaussianBlur;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.AnchorPane;
import javafx.scene.shape.Circle;
import javafx.stage.Stage;
import javafx.util.Duration;

@SuppressWarnings(&quot;Duplicates&quot;)
<span class="nc" id="L33">public class Welcome implements Initializable {</span>

    //the bakground pane that contains everything.
    @FXML
    AnchorPane anchor;

    @FXML
    TextField user;
    @FXML
    PasswordField pass;

    @FXML
    Button log;
    @FXML
    Button reg;

    /**
     * Checks whether login was successful.
     */
<span class="nc" id="L52">    public static boolean isLoginSuccessful = false;</span>

    @Override
    public void initialize(URL location, ResourceBundle resources) {

        //this is a constructor for the
        //glowing at the bottom of the screen.
<span class="nc" id="L59">        int rad = 200;</span>
<span class="nc" id="L60">        int offset = 100;</span>

        //drawing the circle of white below the iewable screen
<span class="nc" id="L63">        Circle c = new Circle(anchor.getPrefWidth() / 2, anchor.getPrefHeight() + rad, rad);</span>
<span class="nc" id="L64">        c.setFill(WHITE);</span>
        //adding a gaussian blur to make it look like a star.
        //this part is seen on screen.
<span class="nc" id="L67">        c.setEffect(new GaussianBlur(50 + offset));</span>


<span class="nc" id="L70">        c.setOpacity(0);</span>
<span class="nc" id="L71">        anchor.getChildren().add(c);</span>

        //this method draws all the stars on the screen.
<span class="nc" id="L74">        stars();</span>


        //timeline tht makes the glowing increase over time
        //adds a movement/dynamic effect to the screen.
<span class="nc" id="L79">        Timeline tm = new Timeline();</span>

<span class="nc" id="L81">        tm.getKeyFrames().addAll(</span>
<span class="nc" id="L82">                new KeyFrame(Duration.seconds(5),</span>
<span class="nc" id="L83">                        new KeyValue(c.opacityProperty(), 1),</span>
<span class="nc" id="L84">                        new KeyValue(c.scaleXProperty(), 3),</span>
<span class="nc" id="L85">                        new KeyValue(c.translateYProperty(), -20)));</span>



<span class="nc" id="L89">        tm.play();</span>


<span class="nc" id="L92">    }</span>


    /**
     * constructs a star (white circle)
     * @param anc the pane theyll be drawn in.
     * @param width the x pos on screen.
     * @param height the y pos on screen.
     * @param r the radius of the star.
     * @param n the number of stars to be drawn.
     * @param circles the array list it'll be added to.
     */
    private static void drawCircle(AnchorPane anc, int width,
                                  int height, double r, int n,
                                  ArrayList&lt;Circle&gt; circles) {

<span class="nc bnc" id="L108" title="All 2 branches missed.">        for (int i = 0; i &lt; n; i++) {</span>

<span class="nc" id="L110">            double xx = Math.random() * width;</span>
<span class="nc" id="L111">            double yy = Math.random() * height;</span>

<span class="nc" id="L113">            double rr = Math.random();</span>

<span class="nc" id="L115">            Circle c = new Circle(xx, yy, r + rr);</span>
<span class="nc" id="L116">            c.setFill(WHITE);</span>

<span class="nc" id="L118">            GaussianBlur gaussianBlur = new GaussianBlur();</span>
<span class="nc" id="L119">            gaussianBlur.setRadius(r * 5);</span>
<span class="nc" id="L120">            c.setEffect(gaussianBlur);</span>

<span class="nc" id="L122">            circles.add(c);</span>
<span class="nc" id="L123">            anc.getChildren().add(c);</span>

        }

<span class="nc" id="L127">    }</span>

    /**
     * This method draws the stars in the opening screen.
     */
    public void stars() {

<span class="nc" id="L134">        ArrayList&lt;Circle&gt; fore = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L135">        ArrayList&lt;Circle&gt; mid = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L136">        ArrayList&lt;Circle&gt; back = new ArrayList&lt;&gt;();</span>

<span class="nc" id="L138">        drawCircle(anchor, (int)anchor.getPrefWidth(), (int)anchor.getPrefHeight() * 10,</span>
                1, 50, fore);
<span class="nc" id="L140">        drawCircle(anchor, (int)anchor.getPrefWidth(), (int)anchor.getPrefHeight() * 10,</span>
                0.5, 50 * 5, mid);
<span class="nc" id="L142">        drawCircle(anchor, (int)anchor.getPrefWidth(), (int)anchor.getPrefHeight() * 10,</span>
                0.0, 50 * 10, back);

<span class="nc bnc" id="L145" title="All 2 branches missed.">        for (int i = 0; i &lt; fore.size(); i++) {</span>
<span class="nc" id="L146">            Timeline tm = new Timeline();</span>

<span class="nc" id="L148">            tm.getKeyFrames().addAll(</span>
<span class="nc" id="L149">                    new KeyFrame(Duration.seconds(90),</span>
<span class="nc" id="L150">                            new KeyValue(fore.get(i).translateYProperty(), -1000)));</span>
<span class="nc" id="L151">            tm.play();</span>
        }
<span class="nc bnc" id="L153" title="All 2 branches missed.">        for (int i = 0; i &lt; mid.size(); i++) {</span>
<span class="nc" id="L154">            Timeline tm = new Timeline();</span>

<span class="nc" id="L156">            tm.getKeyFrames().addAll(</span>
<span class="nc" id="L157">                    new KeyFrame(Duration.seconds(160),</span>
<span class="nc" id="L158">                            new KeyValue(mid.get(i).translateYProperty(), -1000)));</span>
<span class="nc" id="L159">            tm.play();</span>
        }
<span class="nc bnc" id="L161" title="All 2 branches missed.">        for (int i = 0; i &lt; back.size(); i++) {</span>
<span class="nc" id="L162">            Timeline tm = new Timeline();</span>

<span class="nc" id="L164">            tm.getKeyFrames().addAll(</span>
<span class="nc" id="L165">                    new KeyFrame(Duration.seconds(450),</span>
<span class="nc" id="L166">                            new KeyValue(back.get(i).translateYProperty(), -1000)));</span>
<span class="nc" id="L167">            tm.play();</span>
        }
<span class="nc" id="L169">    }</span>

    /**
     * this is the hovering effect method.
     * scales up the button.
     * repostiions them to maintain order on the page.
     * (no overlapping of elements).
     * @param scalar the amount of scaling to be done.
     * @param duration the length of the animation.
     * @param transX the x translation.
     * @param transY the y translation.
     * @param btn the button the animation should be applied to.
     */
    @FXML
    void scale(double scalar, double duration, double transX, double transY, Button btn) {

<span class="nc" id="L185">        Timeline tm = new Timeline();</span>

<span class="nc" id="L187">        tm.getKeyFrames().addAll(</span>
<span class="nc" id="L188">                new KeyFrame(Duration.seconds(duration),</span>
<span class="nc" id="L189">                        new KeyValue(btn.scaleXProperty(), scalar),</span>
<span class="nc" id="L190">                        new KeyValue(btn.scaleYProperty(), scalar),</span>
<span class="nc" id="L191">                        new KeyValue(btn.translateXProperty(), transX),</span>
<span class="nc" id="L192">                        new KeyValue(btn.translateYProperty(), transY)));</span>

<span class="nc" id="L194">        tm.play();</span>
<span class="nc" id="L195">    }</span>

    /**
     * remove the added hovering effect when.
     * the user hovers their mouse over the login button.
     * @param mouseEvent the users mouse cursor location.
     */
    @FXML
    void enterLog(MouseEvent mouseEvent) {
<span class="nc" id="L204">        scale(1.2, 0.1, -17, 3.5, log);</span>
<span class="nc" id="L205">    }</span>

    /**
     * remove the added hovering effect when.
     * the user hovers their mouse over the login button.
     * @param mouseEvent the users mouse cursor location.
     */
    @FXML
    void exitLog(MouseEvent mouseEvent) {
<span class="nc" id="L214">        scale(1, 0.06, 0, 0, log);</span>
<span class="nc" id="L215">    }</span>

    /**
     * add hovering effect when.
     * the user hovers their mouse over the registration button.
     * @param mouseEvent the users mouse cursor location.
     */
    @FXML
    void enterReg(MouseEvent mouseEvent) {
<span class="nc" id="L224">        scale(1.2, 0.1, 17, 3.5, reg);</span>
<span class="nc" id="L225">    }</span>

    /**
     * remove the added hovering effect when.
     * the user hovers their mouse over the registration button.
     * @param mouseEvent the users mouse cursor location.
     */
    @FXML
    void exitReg(MouseEvent mouseEvent) {
<span class="nc" id="L234">        scale(1, 0.06, 0, 0, reg);</span>
<span class="nc" id="L235">    }</span>

    /**
     * to retrieve the login info from the input fields.
     */
    @FXML
    void sendLogin() {
<span class="nc" id="L242">        String name = user.getText();</span>
<span class="nc" id="L243">        String password = pass.getText();</span>

<span class="nc" id="L245">        System.out.println(name + password);</span>
<span class="nc" id="L246">    }</span>

    /**
     * when the user clicks the register button.
     * it opens the registration page for them.
     * @param mouseEvent the users click.
     * @throws IOException required input exception.
     */
    @FXML
    void openReg(MouseEvent mouseEvent) throws IOException {
        //path to registration page fxml page.
<span class="nc" id="L257">        URL url = new File(&quot;src/main/java/gui/resources/register.fxml&quot;).toURI().toURL();</span>
<span class="nc" id="L258">        Parent root = FXMLLoader.load(url);</span>

<span class="nc" id="L260">        Scene scene = new Scene(root, 800, 600);</span>
<span class="nc" id="L261">        Stage window = (Stage) ((Node) mouseEvent.getSource()).getScene().getWindow();</span>

<span class="nc" id="L263">        window.setScene(scene);</span>

<span class="nc" id="L265">        window.setScene(scene);</span>
<span class="nc" id="L266">        window.show();</span>
<span class="nc" id="L267">    }</span>

    /**
     * when the login is clicked.
     * checks validity of inputs and opens new page.
     * @param mouseEvent the users click.
     */
    @FXML
    void clickLog(MouseEvent mouseEvent) {
<span class="nc" id="L276">        Stage stage = (Stage) log.getScene().getWindow();</span>
<span class="nc" id="L277">        stage.close();</span>
        try {

<span class="nc" id="L280">            String name = user.getText();</span>
<span class="nc" id="L281">            String pw = pass.getText();</span>

<span class="nc" id="L283">            String sql = &quot;select username, password from users where username = ? and password = ?&quot;;</span>
<span class="nc" id="L284">            PreparedStatement st = DatabaseConnection.getConnection().prepareStatement(sql);</span>
<span class="nc" id="L285">            st.setString(1, name);</span>
<span class="nc" id="L286">            st.setString(2, pw);</span>

<span class="nc" id="L288">            ResultSet rs = st.executeQuery();</span>
<span class="nc bnc" id="L289" title="All 2 branches missed.">            if(rs.next())</span>
<span class="nc" id="L290">                isLoginSuccessful = true;</span>
            else{
<span class="nc" id="L292">                isLoginSuccessful = false;</span>
            }{
                try{
<span class="nc" id="L295">                    st.close();</span>
<span class="nc" id="L296">                    rs.close();</span>
                }
                finally {
<span class="nc" id="L299">                    st.close();</span>
<span class="nc" id="L300">                    rs.close();</span>
                }
            }
<span class="nc" id="L303">        } catch (SQLException ex) {</span>
<span class="nc" id="L304">            ex.printStackTrace();</span>
<span class="nc" id="L305">        }</span>

<span class="nc" id="L307">    }</span>


    //required getters and setters

    public void setAnchor(AnchorPane anchor) {
<span class="nc" id="L313">        this.anchor = anchor;</span>
<span class="nc" id="L314">    }</span>

    public AnchorPane getAnchor() {
<span class="nc" id="L317">        return anchor;</span>
    }

    public void setUser(TextField user) {
<span class="nc" id="L321">        this.user = user;</span>
<span class="nc" id="L322">    }</span>

    public TextField getUser() {
<span class="nc" id="L325">        return user;</span>
    }

    public void setPass(PasswordField pass) {
<span class="nc" id="L329">        this.pass = pass;</span>
<span class="nc" id="L330">    }</span>

    public PasswordField getPass() {
<span class="nc" id="L333">        return pass;</span>
    }


    public Button getLog() {
<span class="nc" id="L338">        return log;</span>
    }

    public void setLog(Button log) {
<span class="nc" id="L342">        this.log = log;</span>
<span class="nc" id="L343">    }</span>

    public Button getReg() {
<span class="nc" id="L346">        return reg;</span>
    }

    public void setReg(Button reg) {
<span class="nc" id="L350">        this.reg = reg;</span>
<span class="nc" id="L351">    }</span>


}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>